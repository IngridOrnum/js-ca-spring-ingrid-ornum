<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Movie Genre Filter</title>
    <style>
        .movie {
            display: flex;
            margin-bottom: 10px;
        }
        .movie img {
            width: 100px;
            height: auto;
            margin-right: 10px;
        }
    </style>
</head>
<body>
    <select id="filter-select">
        <option value="default">View all movies</option>
    </select>
    <div id="movies-list"></div>
    
    <script>
        const filterSelect = document.getElementById('filter-select');
        const moviesList = document.getElementById('movies-list');

        // Function to fetch movie genres from the API
        async function fetchMovieGenres() {
            try {
                const response = await fetch('https://api.noroff.dev/api/v1/square-eyes');
                const data = await response.json();
                const genres = data.map(movie => movie.genre);

                // Remove duplicate genres
                const uniqueGenres = [...new Set(genres)];

                // Populate the select element with options
                uniqueGenres.forEach(genre => {
                    const option = document.createElement('option');
                    option.value = genre.toLowerCase();
                    option.textContent = genre;
                    filterSelect.appendChild(option);
                });

                // Add event listener to filter movies when a genre is selected
                filterSelect.addEventListener('change', () => {
                    const selectedGenre = filterSelect.value.toLowerCase();
                    const filteredMovies = data.filter(movie => movie.genre.toLowerCase() === selectedGenre || selectedGenre === 'default');

                    // Render filtered movies
                    renderMovies(filteredMovies);
                });
            } catch (error) {
                console.error('Error fetching movie genres:', error);
            }
        }

        // Function to render movies
        function renderMovies(movies) {
            moviesList.innerHTML = ''; // Clear previous movie list

            movies.forEach(movie => {
                const movieElement = document.createElement('div');
                movieElement.classList.add('movie');

                // Movie cover (image)
                const image = document.createElement('img');
                image.src = movie.cover;
                image.alt = movie.title;
                movieElement.appendChild(image);

                // Movie title
                const titleElement = document.createElement('p');
                titleElement.textContent = movie.title;
                movieElement.appendChild(titleElement);

                // Release year
                const releaseYearElement = document.createElement('p');
                releaseYearElement.textContent = `Release Year: ${movie.releaseYear}`;
                movieElement.appendChild(releaseYearElement);

                moviesList.appendChild(movieElement);
            });
        }

        // Call the fetchMovieGenres function to populate the select element
        fetchMovieGenres();
    </script>
</body>
</html>



<!--<!DOCTYPE html>-->
<!--<html lang="en">-->
<!--<head>-->
<!--    <meta charset="UTF-8">-->
<!--    <meta name="viewport" content="width=device-width, initial-scale=1.0">-->
<!--    <title>Movie Genre Filter</title>-->
<!--</head>-->
<!--<body>-->
<!--    <select id="filter-select">-->
<!--        <option value="default">View all movies</option>-->
<!--    </select>-->
<!--    <div id="movies-list"></div>-->
<!--    -->
<!--    <script>-->
<!--        const filterSelect = document.getElementById('filter-select');-->
<!--        const moviesList = document.getElementById('movies-list');-->

<!--        // Function to fetch movie genres from the API-->
<!--        async function fetchMovieGenres() {-->
<!--            try {-->
<!--                const response = await fetch('https://api.noroff.dev/api/v1/square-eyes');-->
<!--                const data = await response.json();-->
<!--                const genres = data.map(movie => movie.genre);-->

<!--                // Remove duplicate genres-->
<!--                const uniqueGenres = [...new Set(genres)];-->

<!--                // Populate the select element with options-->
<!--                uniqueGenres.forEach(genre => {-->
<!--                    const option = document.createElement('option');-->
<!--                    option.value = genre.toLowerCase();-->
<!--                    option.textContent = genre;-->
<!--                    filterSelect.appendChild(option);-->
<!--                });-->

<!--                // Add event listener to filter movies when a genre is selected-->
<!--                filterSelect.addEventListener('change', () => {-->
<!--                    const selectedGenre = filterSelect.value.toLowerCase();-->
<!--                    const filteredMovies = data.filter(movie => movie.genre.toLowerCase() === selectedGenre || selectedGenre === 'default');-->

<!--                    // Render filtered movies-->
<!--                    renderMovies(filteredMovies);-->
<!--                });-->
<!--            } catch (error) {-->
<!--                console.error('Error fetching movie genres:', error);-->
<!--            }-->
<!--        }-->

<!--        // Function to render movies-->
<!--        function renderMovies(movies) {-->
<!--            moviesList.innerHTML = ''; // Clear previous movie list-->

<!--            movies.forEach(movie => {-->
<!--                const movieElement = document.createElement('div');-->
<!--                movieElement.textContent = movie.title;-->
<!--                moviesList.appendChild(movieElement);-->
<!--            });-->
<!--        }-->

<!--        // Call the fetchMovieGenres function to populate the select element-->
<!--        fetchMovieGenres();-->
<!--    </script>-->
<!--</body>-->
<!--</html>-->